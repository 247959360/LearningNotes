{"version":3,"file":"vue.js","sources":["../src/util/index.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/init/state.js","../src/compileToFunction/index.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle/lifecycle.js","../src/init/init.js","../src/vdom/createElement.js","../src/render/render.js","../src/initGlobaleAPI/index.js","../src/index.js"],"sourcesContent":["export function isObject(data) {\n  if (typeof data === 'object' && data !== null) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nconst LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mount',\n  'beforeUpdate',\n  'update',\n  'beforeDestory',\n  'destoryed'\n]\n\nlet strats = {}\nfunction mergeHook(parentVal,childVal) {\n  if(childVal) {\n    if(parentVal) {\n      return [].concat(parentVal, childVal)\n    } else {\n      return childVal\n    }\n  } else {\n    return parentVal\n  }\n}\nLIFECYCLE_HOOKS.forEach(hook => {\n  strats[hook] = mergeHook\n})\n\nexport function def(data, key, value) {\n  Object.defineProperty(data, key, {\n    // 不可被枚举\n    enumerable: false,\n    // 不可以被在修改\n    configurable: false,\n    // 值\n    value: value\n  })\n}\n\n// 合并用户传递进来的mixin options是父的选项  mixin是自己传递的\nexport function mergeOptions(parent, child) {\n  const options = {}\n  for(let key in parent) {\n    mergeField(key)\n  }\n  for(let key in child) { // 已经合并过来  就不需要在合并了\n    // 父元素已经有这个属性了， 就不需要在合并了\n    if(!parent.hasOwnProperty(key)) {\n      mergeField(key)\n    }\n  }\n  // 默认的合并策略是这样  但是有些属性  需要特殊的合并方式\n  // 生命周期的合并\n  function mergeField(key) {\n    // 生命周期单独的策略去合并\n    // watch computed 等各种合并 采用不同的策略\n    if(strats[key]) {\n      // console.log(\"1111\")\n      return options[key] = strats[key](parent[key], child[key])\n    }\n    if(typeof parent[key] === 'object' && typeof child[key] == 'object') {\n      options[key] = {\n        ...parent[key],\n        ...child[key]\n      }\n    } else if(child[key] == null) {\n      options[key] = parent[key]\n    } else {\n      options[key] = child[key]\n    }\n  }\n  return options\n}\n","\nlet oldArrayMethods = Array.prototype\nexport let arrayMethods = Object.create(oldArrayMethods)\n\n// 查找原型的方法  先从 __proto__ 上查找\n// 找不到的话  再去 prototype上查找\n// \n// 原型链看一下\nconst methods = [\n  'unshift',\n  'shift',\n  'pop',\n  'push',\n  'splice',\n  'sort',\n  'reverse'\n]\n\nmethods.forEach((method, index) => {\n  arrayMethods[method] = function(...args) {\n    // console.log('用户改变了数组')\n    const result = oldArrayMethods[method].apply(this, args)\n    let ob = this.__ob__\n    // console.log(ob, 'ob方法')\n    let inserted // 插入的元素是对象还需要在劫持\n    // 获取到插入的数据\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break;\n      case 'splice':\n        inserted = args.slice(2) // arr.splice(0,1,{name:1})\n      default:\n        break;\n    }\n    if(inserted) {\n      // console.log(inserted, 'inserted')\n      ob.observerArray(inserted)\n    }\n    ob.dep.notify() // 如果用户调用了 push，通知当前的dep更新\n    return  result\n  }\n})\n","\nlet id = 0\nexport default class Dep {\n  constructor() {\n    this.id = id++\n    this.subs = [] // age: [] 对应了很多个watcher\n    this.watcherId = new Set()\n    this.watchers = []\n  }\n  depend() {\n    // 观察者模式  数据变了，就进行更新\n    // 判断当前的watcher是否重复\n    // this.subs.push(Dep.target)\n    // console.log(this.subs, this.id, 'this.subs')\n    // return\n    // for(let i = 0; i < this.subs.length; i++) {\n    //   if(this.subs[i].id !== Dep.target.id) {\n    //     this.subs.push(Dep.target)\n    //   }\n    // }\n    // if(this.subs.length === 0) {\n    //   this.subs.push(Dep.target)\n    // }\n    // // console.log(this.id, 'this.id')\n    // // 相同的wathcer只存放一个\n    // console.log(this.subs, 'this.subs')\n    // console.log(Dep.target.id, 'Dep.target.id')\n    // 上面是我自己解决的方式\n    // watcher 记住当前的Dep实例\n    console.log(`${this.id}---------------this.id`)\n    Dep.target.addDep(this)\n  }\n  notify() {\n    this.subs.forEach((watcher) => {\n      watcher.update()\n    })\n  }\n  // dep中存放watcher\n  addSub(watcher) {\n    this.subs.push(watcher)\n    // console.log(this.subs, `${this.id}---------------this.id`)\n    // let id = watcher.id\n    // if(!this.watcherId.has(id)) {\n    //   this.watcherId.add(id)\n    //   this.watchers.push(watcher)\n    // }\n  }\n}\n\n// 一个变量可能有多个watch\nlet stack = []\n// 第一次调用时 Dep.target 是渲染watcher\nexport function pushTarget(watcher) {\n  Dep.target = watcher\n  // console.log(watcher.id, '当前的watcher的id')\n  stack.push(watcher)\n}\n\n// 移除时把渲染watcher去除\nexport function popTarget() {\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n  // console.log(stack, '当前的stack')\n}\n","// data中的数据 重新定义\nimport { isObject, def } from '../util/index'\nimport { arrayMethods } from './array'\nimport Dep from './dep'\n\n// 递归处理 里面的数据可能很复杂\nclass Observer {\n  constructor(value) {\n    // 创建一个dep属性给数组使用\n    this.dep = new Dep()\n    // 如果数据的层次过多 需要递归的去解析对象中的属性  依次增加 get和set\n    // vue3 使用了proxy 就不需要依次的递归了 支持监听整个对象 也不需要set和get\n    // 给每一个监控过的对象都加一个 __ob__ 属性 指向当前的Observer实例\n    // value.__ob__ = this\n    def(value, '__ob__', this)\n    // Object.defineProperty(value, '__ob__', {\n    //   // 不可被枚举\n    //   enumerable: false,\n    //   // 不可以被在修改\n    //   configurable: false,\n    //   // 值\n    //   value: this\n    // })\n    if(Array.isArray(value)) {\n      // 改变数组的原型上的方法 7个变异的方法  其他没有重写，还是直接走数组原先的方法\n      // 不会被拦截\n      value.__proto__ = arrayMethods\n      // setArray()\n      this.observerArray(value)\n    } else {\n      this.walk(value)\n    }\n  }\n  walk(data) {\n    let keys = Object.keys(data)\n    keys.forEach((key) => {\n      defineReactive(data, key, data[key])\n    })\n  }\n  observerArray(value) {\n    // 判断数组是否还有对象  也是需要进行劫持的\n    value.forEach((item, index) => {\n      observer(item)\n    })\n  }\n}\n\n// 判断数组里面的值是否还是对象，是对象继续继续观察，不是的话就停止观察\nexport function observer(data) {\n  // 数据的劫持\n  // console.log(\"数据的劫持\")\n  // 判断是否是对象\n  let isObj = isObject(data)\n  // console.log(isObj)\n  if(!isObj) {\n    return\n  }\n  // 观测这个对象\n  return new Observer(data)\n}\n\n// 定义响应式数据\n// data对象里面的key 定义为响应式数据\nfunction defineReactive(data, key, value) {\n  // console.log(key, value)\n  // 这个是依赖的实例  依赖的实例  没有\n  let dep = new Dep()\n  console.log(\"初始化进行了数据的劫持\")\n  // observer返回的就是一个Observer实例\n  // 这里传递进去的value有可能是一个数组，也有可能是一个对象\n  let childOb = observer(value)\n  Object.defineProperty(data, key, {\n    // 获取值的时候 做一些操作\n    configurable: true,\n    enumerable: true,\n    get() {\n      console.log(\"取值\")\n      // 这个是Dep大类的Target 渲染一次就有了\n      if(Dep.target) { // 如果当前有watcher了\n        // 取值的时候 先把wathcer存起来\n        dep.depend() // 我要将watcher存起来\n        // 如果当前取值的时候，childOb是一个对象或者数组时\n        if(childOb) {\n          childOb.dep.depend() // 数组的依赖收集\n        }\n      }\n      return value\n    },\n    // 设置值的时候 做一些操作\n    set(newValue) {\n      console.log(\"重新设置了数据了\")\n      if(newValue === value) return\n      // 设置的值是对象  还需要再次进行数据的劫持\n      observer(newValue)\n      value = newValue\n      // 设置值的时候  通知依赖的wathcer来进行更新操作\n      dep.notify()\n    }\n  })\n}\n\nexport function initSet(Vue, vm) {\n  Vue.prototype.$set = function(target, key, value) {\n    // 响应式处理\n    defineReactive(target, key, value)\n    // vm._data = target\n  }\n}\n\n// function setArray() {\n//   let methods = [\n//     'unshift',\n//     'shift',\n//     'pop',\n//     'push',\n//     'splice',\n//     'sort',\n//     'reverse'\n//   ]\n//   let oldPrototype = Array.prototype\n//   methods.forEach((method) => {\n//     Array.prototype[method] = function(value) {\n//       console.log(oldPrototype)\n//       // 这个会导致死循环\n//       // let r = oldPrototype[method].call(this, value)\n//       // return r\n//     }\n//   })\n// }\n// for(let i = 0; i < methods.length; i++) {\n//   Array.prototype[methods[i]] = function(value) {\n//     console.log(value)\n//     // oldPrototype\n//     // oldPrototype[methods[i]].call(this, value)\n//     observer(value)\n//   }\n// }\n","// 初始化状态\nimport { observer } from '../observer/index.js'\nexport function initState(vm) {\n  const opts = vm.$options\n  // console.log(opts)\n  // vue的数据来源 属性 方法 数据 计算属性 watch\n  // 初始化 先属性 在方法\n  if(opts.props) {\n    initProps(vm)\n  }\n  if(opts.methods) {\n    initMethod(vm)\n  }\n  if(opts.data) {\n    initData(vm)\n    // console.log(\"111111xxxxx\")\n    let keys = Object.keys(vm._data)\n    // 这边也是需要进行递归处理的\n    // 做一个代理  让用户可以直接通过 实例.xx 获取属性\n    keys.forEach((key, index) => {\n      // 也就是做一个引用而已  还是指向vm._data里面的数据\n      proxy(vm, '_data', key)\n    })\n  }\n  if(opts.data) {\n    initComputed(vm)\n  }\n  if(opts.data) {\n    initWatch(vm)\n  }\n}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newValue) {\n      vm[source][key] = newValue\n    }\n  })\n}\n\nfunction initProps(vm) {\n\n}\n\nfunction initMethod(vm) {\n  \n}\n\nfunction initData(vm) {\n  // console.log('初始化数据')\n  let data = vm.$options.data\n  // data里面的this指向还是实例\n  data = vm._data = typeof data == 'function' ? data.call(vm) : data\n  // 初始化数据后，处理数据 让用户可以直接修改data里面的数据\n  // 将数据挂载到 vm._data 上面\n  // console.log(vm._data, 'vm._data')\n  // 对象劫持 用户改变了数据 我希望可以得到通知刷新页面\n  observer(data) // 响应式原理\n}\n\nfunction initComputed(vm) {\n  \n}\n\nfunction initWatch(vm) {\n  \n}\n","// ast语法树  是用对象来描述原生语法的  虚拟dom 用对象来描述dom节点\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;  // abc-aaa\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // <aaa:abc> \nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 > 自闭和标签\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配vue的模版语法 {{}}\n\n// 正则\n// 匹配标签、匹配属性\nlet root;\nlet currentParent;\nlet stack = [];\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\n\nfunction createASTElement(tagName,attrs){\n  return {\n      tag:tagName,\n      type:ELEMENT_TYPE,\n      children:[],\n      attrs,\n      parent:null\n  }\n}\n\nfunction start(tagName, attrs) {\n  let element = createASTElement(tagName,attrs);\n  if(!root){\n      root = element;\n  }\n  currentParent = element;\n  stack.push(element);\n}\n\nfunction end(tagName) {\n  let element = stack.pop();\n  currentParent = stack[stack.length-1];\n  if(currentParent){\n      element.parent = currentParent;\n      currentParent.children.push(element);\n  }\n}\n\nfunction chars(text) {\n  text = text.replace(/\\s/g,'');\n  if(text){\n      currentParent.children.push({\n          type:TEXT_TYPE,\n          text\n      })\n  }\n}\n\nfunction parseHTML(html){\n  \n  while(html){\n      let textEnd = html.indexOf('<');\n      if(textEnd == 0){\n          const startTagMatch = parseStartTag();\n          if(startTagMatch){\n              start(startTagMatch.tagName,startTagMatch.attrs);\n              continue;\n          }\n          const endTagMatch = html.match(endTag);\n          if(endTagMatch){\n              advance(endTagMatch[0].length);\n              end(endTagMatch[1]);\n              continue;\n          }\n      }\n      let text;\n      if(textEnd >= 0){\n          text = html.substring(0,textEnd);\n      }\n      if(text){\n          advance(text.length);\n          chars(text);\n      }\n  }\n  function advance(n){\n      html = html.substring(n);\n  }\n  function parseStartTag(){\n      const start = html.match(startTagOpen);\n      if(start){\n          const match = {\n              tagName:start[1],\n              attrs:[]\n          }\n          advance(start[0].length);\n          let attr,end;\n          while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\n              advance(attr[0].length);\n              match.attrs.push({name:attr[1],value:attr[3]});\n          }\n          if(end){\n              advance(end[0].length);\n              return match\n          }\n      }\n  }\n  return root\n}\nexport function compileToFunction(template){\n  let root = parseHTML(template);\n  //   console.log(root)\n  // 需要将ast语法树生成最终的render函数  就是字符串拼接（模版引擎）\n  let code = generate(root);\n  //   console.log(code)\n  let render = `with(this){return ${code}}`;\n  let renderFn = new Function(render);\n  //  console.log(renderFn)\n  return renderFn\n}\n\nfunction gen(node) {\n  if (node.type == 1) {\n      return generate(node);\n  } else {\n      let text = node.text\n      if(!defaultTagRE.test(text)){\n          return `_v(${JSON.stringify(text)})`\n      }\n      let lastIndex = defaultTagRE.lastIndex = 0\n      let tokens = [];\n      let match,index;\n      \n      while (match = defaultTagRE.exec(text)) {\n          index = match.index;\n          if(index > lastIndex){\n              tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n          }\n          tokens.push(`_s(${match[1].trim()})`)\n          lastIndex = index + match[0].length;\n      }\n      if(lastIndex < text.length){\n          tokens.push(JSON.stringify(text.slice(lastIndex)))\n      }\n      return `_v(${tokens.join('+')})`;\n  }\n}\nfunction getChildren(el) { // 生成儿子节点\n  const children = el.children;\n  if (children) {\n      return `${children.map(c=>gen(c)).join(',')}`\n  } else {\n      return false;\n  }\n}\nfunction genProps(attrs){ // 生成属性\n  let str = '';\n  for(let i = 0; i<attrs.length; i++){\n      let attr = attrs[i];\n      if(attr.name === 'style'){\n          let obj = {}\n          attr.value.split(';').forEach(item=>{\n              let [key,value] = item.split(':');\n              obj[key] = value;\n          })\n          attr.value = obj;\n      }\n      str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0,-1)}}`;\n}\nfunction generate(el) {\n  let children = getChildren(el);\n  let code = `_c('${el.tag}',${\n      el.attrs.length?`${genProps(el.attrs)}`:'undefined'\n  }${\n      children? `,${children}`:''\n  })`;\n  return code;\n}\n","import Dep, { pushTarget, popTarget } from './dep.js'\nlet id = 0\nclass Watcher {\n  constructor(vm, exprOrFn, callback, options) {\n    this.vm = vm\n    // this.exprOrFn = exprOrFn\n    this.callback = callback\n    this.options = options\n    this.id = id++\n    // 集合不能重复\n    this.depsId = new Set()\n    this.deps = []\n    // 将内部传过来的回调函数 放到getter属性上\n    this.getter = exprOrFn\n    this.get()  // 调用get方法  会执行渲染watcher\n  }\n  get() {\n    // 这里的watcher就是当前的watcher实例\n    pushTarget(this) // 收集watcher  将watcher存在了Dep.target\n    this.getter() // 渲染watcher执行\n    popTarget()\n  }\n  update() {\n    console.log(\"执行了更新了111\")\n    this.get()\n  }\n  // wathcer中存放Dep\n  addDep(dep) { // watcher不能放重复的Dep， Dep里不能放重复的watcher\n    let id = dep.id\n    if(!this.depsId.has(id)) {\n      this.depsId.add(id)\n      // 保存当前的dep\n      this.deps.push(dep)\n      // 当前的watcher存放进去\n      dep.addSub(this)\n    }\n    // 这个wacther 对应了两个Dep\n    console.log(this.deps)\n  }\n}\nexport default Watcher\n","export function patch(oldVnode, vnode) {\n  // 1.判断是更新还是渲染\n  const isRealElement = oldVnode.nodeType\n  // 判断是否是真实的元素\n  if(isRealElement) {\n    const oldElm = oldVnode // div id=\"app\"\n    const parentEm = oldElm.parentNode // body\n    let el = createElm(vnode)\n    // 插入到老元素的下一个元素\n    parentEm.insertBefore(el, oldElm.nextSibling)\n    parentEm.removeChild(oldElm)\n    // 渲染好的结果返回\n    return el\n  }\n  // 2.递归创建真实节点 替换掉老得节点\n\n}\n\nfunction createElm(vnode) { // 根据虚拟节点创建真实节点\n  // return document.createElement('div')\n  let { tag, children, key, data, text } = vnode\n  // console.log(tag)\n  // 是标签就创建标签 // 如果不是标签 就是文本\n  if(typeof tag === 'string') {\n    vnode.el = document.createElement(tag)\n    // 往标签上添加属性\n    updateProperties(vnode)\n    children.forEach(child => { // 递归创建儿子节点, 将儿子节点放入父节点\n      return vnode.el.appendChild(createElm(child))\n    });\n  } else {\n    // 虚拟dom上映射的真实dom  方便后续的更新操作\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\n\nfunction updateProperties(vnode) {\n  let newProps = vnode.data\n  let keys = Object.keys(newProps)\n    keys.forEach((key, index) => {\n    vnode.el.setAttribute(key, newProps[key])\n  })\n}\n","import Watcher  from '../observer/watcher'\nimport { patch } from '../vdom/patch.js'\nexport function mountComponent(vm, el) {\n  const options = vm.$options\n  // 真是的el挂载到$el\n  vm.$el = el\n  // console.log(vm)\n  // 执行生命周期 可以拿到el，但是el还没有被渲染完\n  callHook(vm, 'beforeMount')\n  // 渲染页面\n  // 更新组件 \n  let updateComponent = () => { // 无论是渲染还是更新都会调用此方法\n    // 返回的是虚拟的dom\n    // 虚拟的dom生成真实的dom\n    // vm._render() 获取到的是虚拟的节点\n    vm._update(vm._render())\n  }\n  // 渲染watcher 每个组件都有一个watcher\n  // 默认渲染wathcer是没有回调的\n  new Watcher(vm, updateComponent, ()=> {}, true) // 这是一个渲染watcher\n  callHook(vm, 'mounted')\n}\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function(vnode) {\n    const vm = this\n    // console.log(vnode, 'vnode')\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n\n// _update 的patch 此时已经创建了真实的dom\n\nexport function callHook(vm, hook) {\n  const handles = vm.$options[hook]\n  if(handles) {\n    for(let i = 0; i < handles.length; i++) {\n      // 绑定了 当前的this  用户就可以获取当前this\n      handles[i].call(vm)\n    }\n  }\n}\n","import { initState } from './state.js'\nimport { initSet } from '../observer/index.js'\nimport { createLogger } from 'vuex'\nimport { compileToFunction } from '../compileToFunction/index.js'\nimport { mountComponent, callHook } from '../lifecycle/lifecycle.js'\n// 在原型上添加一个init方法\nimport { mergeOptions } from '../util/index.js'\nexport function initMixin(Vue) {\n  Vue.prototype._init = function(options) {\n    // 数据的劫持 当前的实例就是this\n    const vm = this\n    // this.$options 指代的就是用户传递的属性\n    // vm.$options = options\n    \n    // 将用户传递的和全局的合并  vm.constructor 指代的是子类\n    // console.log(vm.constructor.options, 'vm.constructor.options')\n    // console.log(options, 'options')\n    // vm.constructor.options 保证谁调了这个类，options就指向谁\n    // vue里面有extends方法  这个看看\n    vm.$options = mergeOptions(vm.constructor.options, options)\n    // 执行初始化的生命周期 beforeCreate 数据还没有被观察过，此时就没有什么get set这种东西\n    callHook(vm, 'beforeCreate')\n    \n    // 设置$set 定义响应式数据   这个响应式方法  会对数据进行观察\n    initSet(Vue)\n\n    // 初始化状态\n    initState(vm)\n    // 此时数据已经被观察过了\n    callHook(vm, 'created')\n\n    // 用户传入了人el属性  那么就需要渲染数据\n    // 执行数据的挂载\n    if(vm.$options.el) {\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function(el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    // 默认会先查找render，没有render，会采用template， temeplate也没有会使用el中的内容\n    if(!options.render) {\n      // 对模版进行编译\n      let template = options.template\n      if(!template && el) {\n        // el.outerHTML包含了el所有的元素\n        template = el.outerHTML\n      }\n      // console.log(template)\n      // 把template变成虚拟节点\n      const render = compileToFunction(template)\n      options.render = render\n    }\n    \n    // 需要将当前的组件 挂载这个组件\n    mountComponent(vm, el)\n  }\n}\n","export function createElement(tag, data = {}, ...children) {\n  let key  = data.key\n  if(key) {\n    delete data.key\n  }\n  // 元素的虚拟节点\n  return vnode(tag, data, key, children, undefined)\n}\n\nexport function createTextNode(text) {\n  // console.log(text, 'text')\n  // 文本的虚拟节点\n  return vnode(undefined, undefined, undefined, undefined, text)\n}\n\n// 虚拟节点  就是通过 _c _v 实现用对象来描述dom的操作\nfunction vnode(tag, data, key, children, text) {\n  return {\n    tag: tag,\n    key: key,\n    data: data,\n    children: children,\n    text: text\n  }\n}\n","import { createElement, createTextNode } from '../vdom/createElement.js'\nexport function renderMixin(Vue) {\n  // _c 创建元素的虚拟节点\n  // _v 创建文本的虚拟节点\n  // _s JSON.stringify\n  Vue.prototype._c = function() {\n    return createElement(...arguments) // 标签名 属性 children\n  }\n  Vue.prototype._v = function(text) {\n    return createTextNode(text)\n  }\n  Vue.prototype._s = function(val) {\n    // 变量的值 可能是一个对象  普通字符串直接返回\n    // 是一个对象展示的话 需要JSON.stringify一下 不然页面无法展示\n    return val === '' ? '' : (typeof val === 'object' ? JSON.stringify(val) : val) \n  }\n  Vue.prototype._render = function() {\n    // console.log('render')\n    const vm = this\n    const { render } = vm.$options\n    // console.log(render)\n    const vnode = render.call(vm) // 绑定当前的this\n    return vnode\n  }\n}\n","import { mixin } from 'vue/types/umd'\nimport { mergeOptions } from '../util/index.js'\nexport function initGlobalAPI(Vue) {\n  // 整个了所以全局相关的内容\n  Vue.options = {}\n  \n  Vue.mixin = function(mixin) {\n    // 实现两个对象的合并\n    this.options = mergeOptions(this.options, mixin)\n  }\n  // Vue.mixin({\n  //   a: 1,\n  //   beforeCreate() {\n  //     console.log('mixin1')\n  //   },\n  //   created() {\n      \n  //   }\n  // })\n  // Vue.mixin({\n  //   b: 2,\n  //   beforeCreate() {\n  //     console.log('mixin2')\n  //   }\n  // })\n  // vue选项的合并 options合并\n  // console.log(Vue.options, 'options')\n\n}\n","// Vue的核心代码 这个文件相当于整合的功能\nimport { initMixin } from './init/init.js'\nimport { renderMixin } from './render/render.js'\nimport { lifecycleMixin } from './lifecycle/lifecycle.js'\nimport { initGlobalAPI } from './initGlobaleAPI/index.js'\nfunction Vue(options) {\n  // 进行vue的初始化\n  this._init(options)\n}\n// let vue = require('vue')\n// console.log(vue)\n// 通过引入文件的方式，给vue原型上添加方法\n// 执行一下 把大 Vue传递进去\n\n// 初始化全局化 API\ninitGlobalAPI(Vue)\n\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\n\n\n\n// initRender(Vue)\nexport default Vue\n\n// function React() {\n//   console.log('react')\n//   this.a = 'sgjm'\n//   this._init()\n// }\n\n// // 原型上的方法 可以获取当前的实例\n// React.prototype._init = function() {\n//   console.log(this)\n// }\n\n// new React()\n"],"names":["isObject","data","LIFECYCLE_HOOKS","strats","mergeHook","parentVal","childVal","concat","forEach","hook","def","key","value","Object","defineProperty","enumerable","configurable","mergeOptions","parent","child","options","mergeField","hasOwnProperty","oldArrayMethods","Array","prototype","arrayMethods","create","methods","method","index","args","result","apply","ob","__ob__","inserted","slice","observerArray","dep","notify","id","Dep","subs","watcherId","Set","watchers","console","log","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observer","isArray","__proto__","walk","keys","defineReactive","item","observer","isObj","childOb","get","depend","set","newValue","initSet","Vue","vm","$set","initState","opts","$options","props","initData","_data","proxy","source","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","defaultTagRE","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","start","element","end","chars","text","replace","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","compileToFunction","template","code","generate","render","renderFn","Function","gen","node","test","JSON","stringify","lastIndex","tokens","exec","trim","join","getChildren","el","map","c","genProps","str","i","obj","split","Watcher","exprOrFn","callback","depsId","deps","getter","has","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentEm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","setAttribute","mountComponent","$el","callHook","updateComponent","_update","_render","lifecycleMixin","handles","initMixin","_init","constructor","$mount","querySelector","outerHTML","undefined","renderMixin","_c","arguments","_v","_s","val","initGlobalAPI","mixin"],"mappings":"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"}